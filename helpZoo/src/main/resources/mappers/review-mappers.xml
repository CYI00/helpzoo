<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="reviewMapper">
  
	  <resultMap id="fundingReviewResultSet" type="Review"> 
	  	<id property="reviewNo" column="FUNDING_REVIEW_NO"/>
	  	
	  	<result property="reviewTitle" column="FUNDING_REVIEW_TITLE"/>
	  	<result property="reviewContent" column="FUNDING_REVIEW_CONTENT"/>
	  	<result property="readCount" column="FUNDING_REVIEW_READ_COUNT"/>
	  	<result property="reviewCreateDate" column="FUNDING_REVIEW_CREATE_DT"/>
	  	<result property="reviewModifyDate" column="FUNDING_REVIEW_MODIFY_DT"/>
	  	<result property="reviewStatus" column="FUNDING_REVIEW_STATUS"/>
	  	<result property="projectNo" column="FUNDING_BOARD_NO"/>
	  	<result property="reviewType" column="REVIEW_TYPE"/>
	  	<result property="reviewWriter" column="FUNDING_REVIEW_WRITER"/>
	  	
	  	<result property="projectTitle" column="FUNDING_TITLE"/>
	  	<result property="memberId" column="MEMBER_ID"/>
	  	
	  </resultMap>
	  
	  <resultMap id="donationReviewResultSet" type="Review">
	  
	  	<id property="reviewNo" column="DONATION_REVIEW_NO"/>
	  	<result property="reviewTitle" column="DONATION_REVIEW_TITLE"/>
	  	<result property="reviewContent" column="DONATION_REVIEW_CONTENT"/>
	  	<result property="readCount" column="DONATION_REVIEW_READ_COUNT"/>
	  	<result property="reviewCreateDate" column="DONATION_REVIEW_CREATE_DT"/>
	  	<result property="reviewModifyDate" column="DONATION_REVIEW_MODIFY_DT"/>
	  	<result property="reviewStatus" column="DONATION_REVIEW_STATUS"/>
	  	<result property="projectNo" column="DONATION_BOARD_NO"/>
	  	<result property="reviewType" column="REVIEW_TYPE"/>
	  	<result property="reviewWriter" column="DONATION_REVIEW_WRITER"/>
	  
	  	<result property="projectTitle" column="DONATION_BOARD_TITLE"/>
	  	<result property="memberId" column="MEMBER_ID"/>
	  </resultMap>
	  
	  <resultMap type="Member" id="mResultSet">
		<id property="memberNo" column="MEMBER_NO"/>
		<result property="memberId" column="MEMBER_ID"/>
		<result property="memberPwd" column="MEMBER_PWD"/>
		<result property="memberName" column="MEMBER_NM"/>
		<result property="memberPhone" column="MEMBER_PHONE"/>
		<result property="memberEmail" column="MEMBER_EMAIL"/>
		<result property="memberAddress" column="MEMBER_ADDR"/>
		<result property="memberPetType" column="MEMBER_PET_TYPE"/>
		<result property="memberPetName" column="MEMBER_PET_NAME"/>
		<result property="memberEnrollDate" column="MEMBER_ENROLL_DATE"/>
		<result property="memberStatus" column="MEMBER_STATUS"/>
		<result property="memberGrade" column="MEMBER_GRADE"/>
	</resultMap>
  
  	  <!-- 펀딩 리뷰 게시판 목록 조회 -->
  	  <select id="selectFundingList" resultMap="fundingReviewResultSet">
  	  	SELECT FUNDING_REVIEW_NO, FUNDING_TITLE, FUNDING_REVIEW_TITLE, MEMBER_ID, 
        FUNDING_REVIEW_READ_COUNT, FUNDING_REVIEW_CREATE_DT
		FROM REVIEW_FUNDING
		JOIN MEMBER ON(FUNDING_REVIEW_WRITER = MEMBER_NO)
		JOIN FUNDING_PROJECT ON(FUNDING_BOARD_NO = FUNDING_ID)
		WHERE FUNDING_REVIEW_STATUS ='Y' 
		ORDER BY FUNDING_REVIEW_NO DESC
  	  </select>
  	  
  	  <!-- 기부 리뷰 게시판 목록 조회 -->
  	  <select id="selectDonationList" resultMap="donationReviewResultSet">
  	  	SELECT DONATION_REVIEW_NO, DONATION_BOARD_TITLE, DONATION_REVIEW_TITLE, MEMBER_ID, 
        DONATION_REVIEW_READ_COUNT, DONATION_REVIEW_CREATE_DT
		FROM REVIEW_DONATION
		JOIN MEMBER ON(DONATION_REVIEW_WRITER = MEMBER_NO)
		JOIN DONATION_BOARD USING(DONATION_BOARD_NO)
		WHERE DONATION_REVIEW_STATUS ='Y' 
		ORDER BY DONATION_REVIEW_NO DESC
  	  </select>
  	  
  	  <!-- 전체 펀딩 리뷰 게시글 수 조회 -->
  	  <select id="getFundingListCount" resultType="_int">
		SELECT COUNT(*) FROM FV_REVIEW
  	  </select>
  	  
  	  <!-- 전체 기부 리뷰 게시글 수 조회 -->
  	  <select id="getDonationListCount" resultType="_int">
		SELECT COUNT(*) FROM DV_REVIEW
  	  </select>
  	  
  	  <!-- 펀딩 구매내역 조회 -->
  	  <select id="fundingBuy" resultType="_int">
  	  	SELECT COUNT(*) FROM MEMBER
		JOIN ORDERS USING(MEMBER_NO)
		WHERE ORDER_STATUS = 'N'
		AND MEMBER_NO='${memberNo}'
  	  </select>
  	  
  	  <!-- 기부 구매내역 조회 -->
  	  <!-- <select id="donationBuy" resultType="_int">
  	  </select> -->
  	  
  	  <!-- 펀딩 게시글 상세조회 -->
  	  <select id="fReviewView" resultType="fundingReviewResultSet">
  	  	
  	  </select>
</mapper>
